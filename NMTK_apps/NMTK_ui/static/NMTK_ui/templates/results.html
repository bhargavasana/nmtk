
<div class="container">
   <div class="row">
      <div class="col-md-4 col-md-offset-8">
        <div class="widget">
          <div>
            <button ng-click="close()" class="navbar-right btn btn-xs btn-primary ic-right">Close</button>
          </div><br/>
        </div>
      </div>
   </div>
   <div class="row">   	  
      <div class="col-md-12">
        <div class="widget stacked">
          <div ng-click="toggleDiv('job_result_help')" class="widget-header">
            <i class="glyphicon glyphicon-info-sign"></i>
            <h3 ng-show="data_file_tab_name == 'Results'">Job Results <span ng-if="datafile_api.description">- {{datafile_api.description}}</span></h3>            
            <h3 ng-hide="data_file_tab_name == 'Results'">Data file <span ng-if="datafile_api.description">- {{datafile_api.description}}</span></h3>
            <i ng-class="{'glyphicon-chevron-right': !isDivEnabled('job_result_help'), 'glyphicon-chevron-down': isDivEnabled('job_result_help')}" 
               class="navbar-right glyphicon ic-right"></i> 
            <button  stop-event='click' class="btn btn-xs btn-primary ic-right navbar-right" ng-click="downloadDatafile(datafile_api)">Download</button>
                     
             </div> <!-- /widget-header -->
          <div ng-show="isDivEnabled('job_result_help') && job" class="widget-content">
            <p>
            This page displays the results of your job. If your data file contained
            GeoSpatial data, then the page will be split to contain a map showing your
            spatial results, and a section with the row data.  You may download your job 
            results (in a range of formats) from the <a href="#/job/">My Jobs</a> 
            tab, using the download links provided there.
            </p>
            <p>
            Please note that this is a "read only" interface allowing you to view
            the results of a current job - you cannot modify/manipulate data here.
            </p>
          </div> <!-- /widget-content -->
          <div ng-show="isDivEnabled('job_result_help') && !job" class="widget-content">
            <p>
            This page displays your data file. If your data file contained
            GeoSpatial data, then the page will be split to contain a map showing your
            spatial results, and a section with the row data.  To view the contents
            of a file within the context of a completed job, navigate to the
            <a href="#/job/">My Jobs</a> tab and choose to view a job result.
            </p>
            <p>
            Please note that this is a "read only" interface allowing you to view
            your data - you cannot modify/manipulate data here.
            </p>
          </div> <!-- /widget-content -->
        </div><!-- /widget stacked -->
      </div><!-- /span12 -->
    </div><!-- /row -->
    <div class="row">
      <div class="col-md-6">
        <div class="widget stacked" ng-show="spatial">
          <div class="widget-header">
            <i class="glyphicon glyphicon-map-marker"></i>
            <h3>Spatial {{data_file_tab_name}}</h3>
          </div> <!-- /widget-header -->
          <div class="widget-content">
            <!-- <div id="map" class="angular-leaflet-map"></div> -->
            <leaflet defaults="leaflet.defaults" layers="leaflet.layers"
                     geojson="geojson" bounds="bounds"></leaflet>
          </div> <!-- /widget-content -->
        </div><!-- /widget stacked -->
        <div class="widget stacked">
          <div class="widget-header">
            <i class="glyphicon glyphicon-list"></i>
            <h3 ng-hide="customFilters.length">All {{data_file_tab_name}}</h3>
            <h3 ng-show="customFilters.length">Filtered {{data_file_tab_name}}</h3>
            <button ng-show="customFilters.length" class="navbar-right btn btn-xs btn-info ic-right" ng-click="setCustomFilters()" 
                    stop-event="click">Reset Filters</button>
            <button class="navbar-right btn btn-xs btn-primary ic-right" ng-click="advanced_filters()" 
                    stop-event="click">Advanced Filters</button>
            
          </div> <!-- /widget-header -->
          <div class="widget-content">
            <div class="gridStyle" ng-grid="gridOptions">
          </div> <!-- /widget-content -->
        </div><!-- /widget stacked -->
      </div><!-- /span6 -->
    </div>
    <div class="row">

      <div class="col-md-6">
        <div ng-show="spatial" class="widget stacked">
          <div class="widget-header">
            <i class="glyphicon glyphicon-picture"></i>
            <h3>Map Legend (all elements styled <span ng-show="result_field">by</span>
                 <select ng-model="result_field" name="result_field" ng-options="field for field in fields">
                   <option value=""></option>
                 </select>
            </h3>
          </div> <!-- /widget-header -->
          <div style="text-align: center;" class="widget-content">
            <img ng-src="{{datafile_api.legend}}"></img>
          </div> <!-- /widget-content -->
        </div><!-- /widget stacked -->
        <div class="widget stacked">
          <div class="widget-header">
            <i class="glyphicon glyphicon-plus-sign"></i>
            <h3>{{selected_features.length}} Selected Features</h3>
            <button class="navbar-right btn btn-xs btn-primary ic-right" ng-click="clearSelection()" ng-show="selected_features.length">Clear Selection</button>
          </div> <!-- /widget-header -->
          <div ng-show="selected_features.length" class="widget-content">  
            <div ng-show="selected_features.length" style="height: 200px; overflow: hidden;" class="gridStyle" ng-grid="gridOptions2"></div>
            <hr ng-show="selected_selected.length" />
            <h4 ng-show="selected_selected.length">
               Displaying feature {{selected_selected[0].nmtk_id}}
            </h4>
            <table class="table table-bordered table-striped table-highlight">
              <tbody>
                <tr ng-repeat="(item, value) in selected_selected[0] track by item">
                  <td>{{item}}</td>
                  <td>{{value}}</td>
                </tr>
              </tbody>
            </table>
          </div> <!-- /widget-content -->
        </div><!-- /widget stacked -->
      </div><!-- /span6 -->
      
    </div><!-- /row -->
    
    
          
    <div class="row">
      <div class="col-md-12">
        <div class="widget stacked">
          <div class="widget-content centered">
            <button ng-click="close()" class="btn btn-primary">Close</button>
          </div>
        </div>
      </div>
    </div>
</div> <!-- /container -->
			



